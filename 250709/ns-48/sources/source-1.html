


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>MoMoCompose Coverage Report > SofReducer</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope: MoMoCompose<span class="separator">|</span>    <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">vn.momo.compose.payment.base.presentation.viewModel.reducer</a>
</div>

<h1>Coverage Summary for Class: SofReducer (vn.momo.compose.payment.base.presentation.viewModel.reducer)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
<th class="coverageStat 
">
  Instruction, %
</th>
</tr>
<tr>
  <td class="name">SofReducer</td>
<td class="coverageStat">
  <span class="percent">
    94.4%
  </span>
  <span class="absValue">
    (17/18)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    77%
  </span>
  <span class="absValue">
    (137/178)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    94.6%
  </span>
  <span class="absValue">
    (141/149)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    89.7%
  </span>
  <span class="absValue">
    (798/890)
  </span>
</td>
</tr>
  <tr>
    <td class="name">SofReducer$Action</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$ActiveAndSelect</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$AddSofToCarousel</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$CashIn</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$ChangeSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/15)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$CloseInstallmentPackage</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$MoveOrAddSofToFirst</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$RearrangeSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$RefreshSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$ResetPromoteSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SelectPromotedSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SetIconList</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SetInstallmentPackage</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SetMoneyPayCTA</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SetPayLaterConfigUi</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SetPromotePayNow</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SetPromoteSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SetSofList</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SyncInstallmentPackage</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$SyncSuggestedSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$ToggleCollapseInstallment</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$ToggleExpandSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$UpdateMoneyPayCTA</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$UpdateReward</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$UpdateShowBalance</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$UpdateTooltip</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Action$UpdateVersion</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Effect</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Effect$ActiveSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Effect$InitSofTransaction</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/15)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Effect$RearrangeSof</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$Effect$SyncReward</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$SofAcc</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (70/70)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SofReducer$sortDebitList$$inlined$compareByDescending$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">SofReducer$sortDebitList$$inlined$thenBy$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    34%
  </span>
  <span class="absValue">
    (18/53)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    77%
  </span>
  <span class="absValue">
    (137/178)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    75.9%
  </span>
  <span class="absValue">
    (148/195)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    72.8%
  </span>
  <span class="absValue">
    (868/1193)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package vn.momo.compose.payment.base.presentation.viewModel.reducer
&nbsp;
&nbsp;import androidx.compose.runtime.Stable
&nbsp;import kotlinx.collections.immutable.PersistentList
&nbsp;import kotlinx.collections.immutable.toPersistentList
&nbsp;import kotlinx.serialization.json.JsonObject
&nbsp;import vn.momo.compose.payment.base.data.repository.sof.PromotePayNow
&nbsp;import vn.momo.compose.payment.base.domain.entities.ChangeSofActor
&nbsp;import vn.momo.compose.payment.base.domain.entities.DisableType
&nbsp;import vn.momo.compose.payment.base.domain.entities.EnumMoneySource
&nbsp;import vn.momo.compose.payment.base.domain.entities.MoneySource
&nbsp;import vn.momo.compose.payment.base.domain.entities.PayXSofInfo
&nbsp;import vn.momo.compose.payment.base.domain.entities.SOFGroup
&nbsp;import vn.momo.compose.payment.base.domain.entities.SOFItem
&nbsp;import vn.momo.compose.payment.base.domain.entities.Sof
&nbsp;import vn.momo.compose.payment.base.domain.entities.SofActionType
&nbsp;import vn.momo.compose.payment.payx.domain.entities.PromotedSof
&nbsp;import vn.momo.compose.payment.payx.domain.entities.RecommendInstallmentState
&nbsp;import vn.momo.compose.payment.payx.domain.entities.RecommendMoneyPayCTA
&nbsp;import vn.momo.compose.payment.payx.domain.entities.SofCTAItem
&nbsp;import vn.momo.compose.payment.payx.domain.entities.SuggestedSof
&nbsp;import vn.momo.compose.payment.payx.localization.localized
&nbsp;import vn.momo.compose.payment.payx.presentation.viewModel.reducers.GroupOfSof
&nbsp;import vn.momo.compose.payment.payx.presentation.viewModel.reducers.PayLaterConfigUi
&nbsp;import vn.momo.compose.payment.payx.presentation.viewModel.reducers.UiVersion
&nbsp;import vn.momo.core.features.annotation.Immutable
&nbsp;import kotlin.math.min
&nbsp;
&nbsp;/**
&nbsp; * Represents the state for SOF (Source of Funds) selection and display in the MVI architecture.
&nbsp; *
&nbsp; * @property list Original list of SOF items for user selection.
&nbsp; * @property selected Currently selected SOF item, or null if none.
&nbsp; * @property isHideBalance Whether to hide the balance of the SOF items.
&nbsp; * @property groupOfSof Grouping state for SOF items (for new UI).
&nbsp; * @property version Current UI version for conditional logic or display.
&nbsp; */
&nbsp;@Stable
&nbsp;interface SofState : Reducer.State {
&nbsp;    val list: PersistentList&lt;SOFItem&gt;
&nbsp;    val selected: SOFItem?
&nbsp;    val isHideBalance: Boolean
&nbsp;    val groupOfSof: GroupOfSof
&nbsp;    val version: UiVersion
&nbsp;    val moneyPayCTA: RecommendMoneyPayCTA?
&nbsp;    val iconBankList: PersistentList&lt;String&gt;
&nbsp;    val cta: PersistentList&lt;SofCTAItem&gt;
&nbsp;}
&nbsp;
<b class="fc">&nbsp;abstract class SofReducer&lt;T : SofState&gt; : Reducer&lt;T, SofReducer.Action, SofReducer.Effect&gt; {</b>
<b class="nc">&nbsp;    @Immutable</b>
&nbsp;    sealed class Action : Reducer.Action {
<b class="nc">&nbsp;        data class UpdateShowBalance(val value: Boolean) : Action()</b>
<b class="nc">&nbsp;        data class SetInstallmentPackage(val recommendInstallmentState: RecommendInstallmentState?) :</b>
<b class="nc">&nbsp;            Action()</b>
&nbsp;
<b class="nc">&nbsp;        data class SetSofList(val list: List&lt;SOFItem&gt;, val selected: SOFItem?) : Action()</b>
<b class="nc">&nbsp;        data class SyncSuggestedSof(val data: SuggestedSof) : Action()</b>
<b class="nc">&nbsp;        data class AddSofToCarousel(val sof: SOFItem) : Action()</b>
<b class="nc">&nbsp;        data class CashIn(val newSof: SOFItem) : Action()</b>
<b class="nc">&nbsp;        object CloseInstallmentPackage : Action()</b>
<b class="nc">&nbsp;        object ToggleCollapseInstallment : Action()</b>
<b class="nc">&nbsp;        data class SetMoneyPayCTA(val moneyPayCTA: RecommendMoneyPayCTA?) : Action()</b>
<b class="nc">&nbsp;        data class UpdateMoneyPayCTA(val title: String, val isSelected: Boolean) : Action()</b>
<b class="nc">&nbsp;        object ResetPromoteSof : Action()</b>
<b class="nc">&nbsp;        data class MoveOrAddSofToFirst(val sof: SOFItem) : Action()</b>
&nbsp;        data class ChangeSof(
<b class="nc">&nbsp;            val sof: SOFItem,</b>
<b class="nc">&nbsp;            val actor: ChangeSofActor = ChangeSofActor.UserClick,</b>
<b class="nc">&nbsp;        ) : Action()</b>
&nbsp;
<b class="nc">&nbsp;        object RefreshSof : Action()</b>
<b class="nc">&nbsp;        data class SetPromoteSof(val promoteSof: PromotedSof?) : Action()</b>
<b class="nc">&nbsp;        data class SelectPromotedSof(val sof: SOFItem?) : Action()</b>
<b class="nc">&nbsp;        data class UpdateTooltip(val isShow: Boolean) : Action()</b>
<b class="nc">&nbsp;        data class ActiveAndSelect(val sof: SOFItem) : Action()</b>
<b class="nc">&nbsp;        data class UpdateVersion(val ver: UiVersion) : Action()</b>
<b class="nc">&nbsp;        data class SyncInstallmentPackage(val group: SOFGroup) : Action()</b>
<b class="nc">&nbsp;        data class UpdateReward(val rewardMap: Map&lt;MoneySource, Int&gt;) : Action()</b>
<b class="nc">&nbsp;        object ToggleExpandSof : Action()</b>
<b class="nc">&nbsp;        data class SetPayLaterConfigUi(val payLaterConfigUi: PayLaterConfigUi?) : Action()</b>
<b class="nc">&nbsp;        data class SetIconList(val icons: List&lt;String&gt;) : Action()</b>
<b class="nc">&nbsp;        data class SetPromotePayNow(val config: PromotePayNow?) : Action()</b>
<b class="nc">&nbsp;        object RearrangeSof : Action()</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    @Immutable</b>
&nbsp;    sealed class Effect : Reducer.Effect {
&nbsp;        data class InitSofTransaction(
<b class="nc">&nbsp;            val sof: SOFItem,</b>
<b class="nc">&nbsp;            val actor: ChangeSofActor = ChangeSofActor.UserClick,</b>
<b class="nc">&nbsp;        ) : Effect()</b>
&nbsp;
&nbsp;        data class ActiveSof(
<b class="nc">&nbsp;            val refId: String,</b>
<b class="nc">&nbsp;            val refParams: JsonObject,</b>
<b class="nc">&nbsp;        ) : Effect()</b>
&nbsp;
<b class="nc">&nbsp;        object SyncReward : Effect()</b>
<b class="nc">&nbsp;        object RearrangeSof : Effect()</b>
&nbsp;    }
&nbsp;
&nbsp;    fun syncGroupSof(
&nbsp;        prev: GroupOfSof, originalList: List&lt;SOFItem&gt;, selected: SOFItem?
&nbsp;    ): GroupOfSof {
<b class="fc">&nbsp;        val promotedMoneySourceType = prev.campaignSof?.moneySource</b>
<b class="fc">&nbsp;        val isCollapsed = prev.isCollapsed</b>
&nbsp;
<b class="fc">&nbsp;        val acc = accumulateSofItems(originalList, promotedMoneySourceType)</b>
<b class="fc">&nbsp;        val fundGroup = if (acc.fundSofs.isNotEmpty()) createFundGroup(acc.fundSofs) else null</b>
<b class="fc">&nbsp;        val debitWithoutPromoted = buildDebitListWithoutPromoted(originalList, promotedMoneySourceType, acc, fundGroup)</b>
<b class="fc">&nbsp;        val sortedDebit = sortDebitList(debitWithoutPromoted, prev)</b>
<b class="fc">&nbsp;        val shouldPromote = shouldPromoteSof(acc.promotedSof)</b>
<b class="fc">&nbsp;        val finalDebit = buildFinalDebitList(sortedDebit, acc, promotedMoneySourceType, shouldPromote, fundGroup)</b>
<b class="fc">&nbsp;        val shouldShowSuggest = shouldPromote &amp;&amp; acc.promotedIndex &gt;= prev.promoteThreshold</b>
<b class="fc">&nbsp;        val finalGroup = prev.copy(</b>
<b class="fc">&nbsp;            debit = finalDebit.toPersistentList(),</b>
<b class="fc">&nbsp;            payLater = acc.payLaterSofs.toPersistentList(),</b>
<b class="fc">&nbsp;            campaignSof = prev.campaignSof?.copy(</b>
<b class="fc">&nbsp;                shouldShow = shouldShowSuggest</b>
&nbsp;            ),
<b class="fc">&nbsp;            windowSize = if (shouldShowSuggest) 3 else prev.promoteThreshold</b>
&nbsp;        )
<b class="pc">&nbsp;        return if (isCollapsed) {</b>
<b class="fc">&nbsp;            rearrangeList(finalGroup, selected = selected)</b>
<b class="nc">&nbsp;        } else finalGroup</b>
&nbsp;    }
&nbsp;
&nbsp;    private data class SofAcc(
<b class="fc">&nbsp;        val payLaterSofs: MutableList&lt;SOFItem&gt; = mutableListOf(),</b>
<b class="fc">&nbsp;        val fundSofs: MutableList&lt;SOFItem&gt; = mutableListOf(),</b>
<b class="fc">&nbsp;        var promotedSof: SOFItem? = null,</b>
<b class="fc">&nbsp;        var fundInsertIndex: Int = -1,</b>
<b class="fc">&nbsp;        var promotedIndex: Int = -1,</b>
<b class="fc">&nbsp;        val result: MutableList&lt;Sof&gt; = mutableListOf(),</b>
<b class="fc">&nbsp;        var fundGroupInserted: Boolean = false</b>
&nbsp;    )
&nbsp;
&nbsp;    /**
&nbsp;     * Tạo các SOFItem từ danh sách gốc, xác định các loại SOF đặc biệt như promoted, fund, pay later.
&nbsp;     */
&nbsp;    private fun accumulateSofItems(
&nbsp;        originalList: List&lt;SOFItem&gt;,
&nbsp;        promotedSof: MoneySource?
&nbsp;    ): SofAcc {
<b class="fc">&nbsp;        return originalList.foldIndexed(SofAcc()) { idx, acc, sof -&gt;</b>
<b class="fc">&nbsp;            when (sof.moneySource) {</b>
<b class="fc">&nbsp;                EnumMoneySource.PayLater -&gt; acc.payLaterSofs.add(sof)</b>
<b class="fc">&nbsp;                EnumMoneySource.Fund -&gt; {</b>
<b class="fc">&nbsp;                    acc.fundSofs.add(sof)</b>
<b class="fc">&nbsp;                    if (acc.fundInsertIndex == -1) acc.fundInsertIndex = idx</b>
<b class="fc">&nbsp;                    if (promotedSof != null &amp;&amp; sof.isSource(promotedSof) &amp;&amp; acc.promotedIndex == -1) {</b>
<b class="fc">&nbsp;                        acc.promotedSof = sof</b>
<b class="fc">&nbsp;                        acc.promotedIndex = idx</b>
&nbsp;                    }
&nbsp;                }
&nbsp;                else -&gt; {
<b class="fc">&nbsp;                    if (promotedSof != null &amp;&amp; sof.isSource(promotedSof) &amp;&amp; acc.promotedIndex == -1) {</b>
<b class="fc">&nbsp;                        acc.promotedSof = sof</b>
<b class="fc">&nbsp;                        acc.promotedIndex = idx</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;            acc</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Xây dựng danh sách debit loại bỏ promoted SOF (sẽ được add vào sau đó) và nhóm các nguồn tiền quỹ
&nbsp;     */
&nbsp;    private fun buildDebitListWithoutPromoted(
&nbsp;        originalList: List&lt;SOFItem&gt;,
&nbsp;        promotedSof: MoneySource?,
&nbsp;        acc: SofAcc,
&nbsp;        fundGroup: SOFGroup?
&nbsp;    ): List&lt;Sof&gt; {
<b class="fc">&nbsp;        val result = mutableListOf&lt;Sof&gt;()</b>
<b class="fc">&nbsp;        originalList.forEach { sof -&gt;</b>
<b class="fc">&nbsp;            when (sof.moneySource) {</b>
<b class="fc">&nbsp;                EnumMoneySource.PayLater -&gt; return@forEach</b>
<b class="fc">&nbsp;                promotedSof -&gt; {</b>
<b class="fc">&nbsp;                    if (promotedSof == EnumMoneySource.Fund) return@forEach</b>
<b class="pc">&nbsp;                    if (sof.uId == acc.promotedSof?.uId) return@forEach</b>
<b class="fc">&nbsp;                    result.add(sof)</b>
&nbsp;                }
<b class="fc">&nbsp;                EnumMoneySource.Fund -&gt; {</b>
<b class="pc">&nbsp;                    if (!acc.fundGroupInserted &amp;&amp; fundGroup != null) {</b>
<b class="fc">&nbsp;                        result.add(fundGroup)</b>
<b class="fc">&nbsp;                        acc.fundGroupInserted = true</b>
&nbsp;                    }
&nbsp;                }
<b class="fc">&nbsp;                else -&gt; result.add(sof)</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return result</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sắp xếp danh sách debit dựa trên trạng thái disable và thứ tự trước đó.
&nbsp;     */
&nbsp;    private fun sortDebitList(
&nbsp;        debitList: List&lt;Sof&gt;,
&nbsp;        prev: GroupOfSof
&nbsp;    ): List&lt;Sof&gt; {
<b class="fc">&nbsp;        val prevOrderMap = prev.debit.mapIndexed { idx, sof -&gt;</b>
<b class="fc">&nbsp;            when (sof) {</b>
<b class="fc">&nbsp;                is SOFItem -&gt; sof.uId to idx</b>
<b class="fc">&nbsp;                is SOFGroup -&gt; sof.parent.uId to idx</b>
<b class="fc">&nbsp;            }</b>
<b class="fc">&nbsp;        }.toMap()</b>
<b class="fc">&nbsp;        return debitList.sortedWith(compareByDescending&lt;Sof&gt; {</b>
<b class="fc">&nbsp;            when (it) {</b>
<b class="pc">&nbsp;                is SOFItem -&gt; it.disableType == DisableType.Show</b>
<b class="fc">&nbsp;                is SOFGroup -&gt; it.parent.disableType == DisableType.Show</b>
<b class="fc">&nbsp;            }</b>
<b class="fc">&nbsp;        }.thenBy {</b>
<b class="fc">&nbsp;            when (it) {</b>
<b class="fc">&nbsp;                is SOFItem -&gt; prevOrderMap[it.uId] ?: Int.MAX_VALUE</b>
<b class="fc">&nbsp;                is SOFGroup -&gt; prevOrderMap[it.parent.uId] ?: Int.MAX_VALUE</b>
<b class="fc">&nbsp;            }</b>
&nbsp;        })
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Kiểm tra xem promoted SOF có nên được hiển thị hay không.
&nbsp;     */
&nbsp;    private fun shouldPromoteSof(promotedSof: SOFItem?): Boolean {
<b class="pc">&nbsp;        return promotedSof != null &amp;&amp; (promotedSof.disableType != DisableType.DisableAndShow || promotedSof.moneySource == EnumMoneySource.Investment)</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Xây dựng danh sách debit cuối cùng, chèn promoted SOF hoặc fund group vào vị trí phù hợp.
&nbsp;     */
&nbsp;    private fun buildFinalDebitList(
&nbsp;        sortedDebit: List&lt;Sof&gt;,
&nbsp;        acc: SofAcc,
&nbsp;        promotedSof: MoneySource?,
&nbsp;        shouldPromote: Boolean,
&nbsp;        fundGroup: SOFGroup?
&nbsp;    ): List&lt;Sof&gt; {
<b class="pc">&nbsp;        return acc.promotedSof?.let { promoted -&gt;</b>
<b class="fc">&nbsp;            buildList {</b>
<b class="fc">&nbsp;                addAll(sortedDebit)</b>
<b class="fc">&nbsp;                val insertIdx = when {</b>
<b class="pc">&nbsp;                    !shouldPromote -&gt; acc.promotedIndex.coerceIn(0, size)</b>
<b class="pc">&nbsp;                    acc.promotedIndex in 0..1 -&gt; acc.promotedIndex.coerceIn(0, size)</b>
<b class="fc">&nbsp;                    else -&gt; min(2, size)</b>
&nbsp;                }
<b class="fc">&nbsp;                if (promotedSof == EnumMoneySource.Fund) {</b>
<b class="pc">&nbsp;                    fundGroup?.also { add(insertIdx, fundGroup) }</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    add(insertIdx, promoted)</b>
&nbsp;                }
<b class="fc">&nbsp;            }</b>
<b class="fc">&nbsp;        } ?: sortedDebit</b>
&nbsp;    }
&nbsp;
&nbsp;    fun rearrangeList(
&nbsp;        group: GroupOfSof,
&nbsp;        selected: SOFItem?,
&nbsp;    ): GroupOfSof {
<b class="fc">&nbsp;        val promoted = group.campaignSof?.moneySource</b>
<b class="fc">&nbsp;        val windowSize = group.windowSize</b>
<b class="pc">&nbsp;        if (selected == null || selected.moneySource == EnumMoneySource.PayLater) {</b>
<b class="fc">&nbsp;            return group</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        val debitList = group.debit</b>
<b class="fc">&nbsp;        val selectedIdx = findSofIndex(debitList, selected.uId)</b>
<b class="fc">&nbsp;        val promotedIdx = findPromotedIndex(debitList, promoted)</b>
&nbsp;
<b class="fc">&nbsp;        if (isWithinWindow(selectedIdx, promotedIdx, windowSize)) {</b>
<b class="fc">&nbsp;            return group</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        val newDebitList = rearrangeDebitList(debitList, selectedIdx, promotedIdx, windowSize)</b>
<b class="fc">&nbsp;        return group.copy(</b>
<b class="fc">&nbsp;            debit = newDebitList.toPersistentList(),</b>
&nbsp;        )
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Tìm index của SOF được chọn trong danh sách debit.
&nbsp;     */
&nbsp;    private fun findSofIndex(debitList: PersistentList&lt;Sof&gt;, selectedUid: String?): Int {
<b class="fc">&nbsp;        return debitList.indexOfFirst {</b>
<b class="fc">&nbsp;            when (it) {</b>
<b class="fc">&nbsp;                is SOFItem -&gt; it.uId == selectedUid</b>
<b class="fc">&nbsp;                is SOFGroup -&gt; it.isSelected(selectedUid)</b>
<b class="fc">&nbsp;            }</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Tìm index của promoted SOF trong danh sách debit.
&nbsp;     */
&nbsp;    private fun findPromotedIndex(debitList: PersistentList&lt;Sof&gt;, promoted: MoneySource?): Int {
<b class="fc">&nbsp;        if (promoted == null) return -1</b>
<b class="fc">&nbsp;        return debitList.indexOfFirst {</b>
<b class="fc">&nbsp;            when (it) {</b>
<b class="pc">&nbsp;                is SOFItem -&gt; it.isSource(promoted) &amp;&amp; (it.disableType != DisableType.DisableAndShow || it.moneySource == EnumMoneySource.Investment)</b>
<b class="pc">&nbsp;                is SOFGroup -&gt; it.parent.isSource(promoted) &amp;&amp; it.parent.disableType != DisableType.DisableAndShow</b>
<b class="fc">&nbsp;            }</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Kiểm tra xem cả selectedIdx và promotedIdx có nằm trong window hiển thị không.
&nbsp;     */
&nbsp;    private fun isWithinWindow(selectedIdx: Int, promotedIdx: Int, windowSize: Int): Boolean {
<b class="pc">&nbsp;        return selectedIdx &lt; windowSize &amp;&amp; promotedIdx &lt; windowSize</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sắp xếp lại danh sách debit để selected và promoted nằm trong window hiển thị.
&nbsp;     */
&nbsp;    private fun rearrangeDebitList(
&nbsp;        debitList: PersistentList&lt;Sof&gt;, selectedIdx: Int, promotedIdx: Int, windowSize: Int
&nbsp;    ): List&lt;Sof&gt; {
<b class="fc">&nbsp;        val otherSofs =</b>
<b class="fc">&nbsp;            debitList.filterIndexed { idx, _ -&gt; idx != selectedIdx &amp;&amp; idx != promotedIdx }</b>
&nbsp;
<b class="fc">&nbsp;        return buildList {</b>
<b class="fc">&nbsp;            addAll(otherSofs)</b>
&nbsp;
<b class="fc">&nbsp;            val newSelected = calculateNewPosition(selectedIdx, 0, windowSize, size)</b>
<b class="fc">&nbsp;            val newPromoted = calculateNewPosition(promotedIdx, windowSize - 1, windowSize, size)</b>
&nbsp;
<b class="pc">&nbsp;            if (selectedIdx == promotedIdx) {</b>
<b class="nc">&nbsp;                addSelectedIfValid(debitList, selectedIdx, newSelected)</b>
&nbsp;            } else {
<b class="fc">&nbsp;                addPromoteAndSelected(</b>
<b class="fc">&nbsp;                    debitList, selectedIdx, promotedIdx, newSelected, newPromoted, windowSize</b>
&nbsp;                )
&nbsp;            }
<b class="fc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Tính toán vị trí mới cho một phần tử dựa trên index hiện tại và target.
&nbsp;     */
&nbsp;    private fun calculateNewPosition(
&nbsp;        currentIdx: Int, targetIdx: Int, windowSize: Int, listSize: Int
&nbsp;    ): Int {
<b class="fc">&nbsp;        return if (currentIdx == -1 || currentIdx &lt; windowSize) {</b>
<b class="fc">&nbsp;            currentIdx.coerceIn(0, listSize)</b>
&nbsp;        } else {
<b class="fc">&nbsp;            targetIdx.coerceIn(0, listSize)</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Thêm SOF được chọn vào danh sách nếu hợp lệ.
&nbsp;     */
&nbsp;    private fun MutableList&lt;Sof&gt;.addSelectedIfValid(
&nbsp;        debitList: PersistentList&lt;Sof&gt;, selectedIdx: Int, newSelected: Int
&nbsp;    ) {
<b class="nc">&nbsp;        if (newSelected != -1 &amp;&amp; selectedIdx != -1) {</b>
<b class="nc">&nbsp;            add(newSelected, debitList[selectedIdx])</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Thêm promoted và selected SOF vào danh sách theo vị trí phù hợp.
&nbsp;     */
&nbsp;    private fun MutableList&lt;Sof&gt;.addPromoteAndSelected(
&nbsp;        debitList: PersistentList&lt;Sof&gt;,
&nbsp;        selectedIdx: Int,
&nbsp;        promotedIdx: Int,
&nbsp;        newSelected: Int,
&nbsp;        newPromoted: Int,
&nbsp;        windowSize: Int
&nbsp;    ) {
<b class="pc">&nbsp;        if (newSelected == newPromoted &amp;&amp; newSelected == windowSize - 1) {</b>
<b class="nc">&nbsp;            if (newSelected != -1 &amp;&amp; selectedIdx != -1) {</b>
<b class="nc">&nbsp;                add(0, debitList[selectedIdx])</b>
&nbsp;            }
<b class="nc">&nbsp;            if (newPromoted != -1 &amp;&amp; promotedIdx != -1) {</b>
<b class="nc">&nbsp;                add(newPromoted, debitList[promotedIdx])</b>
&nbsp;            }
&nbsp;        } else {
<b class="pc">&nbsp;            if (newSelected != -1 &amp;&amp; selectedIdx != -1) {</b>
<b class="fc">&nbsp;                add(newSelected, debitList[selectedIdx])</b>
&nbsp;            }
<b class="pc">&nbsp;            if (newPromoted != -1 &amp;&amp; promotedIdx != -1) {</b>
<b class="fc">&nbsp;                add(newPromoted, debitList[promotedIdx])</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Tạo SOFGroup từ danh sách fund SOF.
&nbsp;     */
&nbsp;    private fun createFundGroup(fundSofs: List&lt;SOFItem&gt;): SOFGroup {
<b class="fc">&nbsp;        val presentationSof = fundSofs.firstOrNull()</b>
<b class="fc">&nbsp;        return SOFGroup(</b>
<b class="fc">&nbsp;            parent = SOFItem(</b>
<b class="fc">&nbsp;                moneySource = EnumMoneySource.Fund,</b>
<b class="fc">&nbsp;                shortName = &quot;fund&quot;.localized(),</b>
<b class="pc">&nbsp;                logo = presentationSof?.logo,</b>
<b class="fc">&nbsp;                balance = -1,</b>
<b class="fc">&nbsp;                sourceToken = &quot;Fund-parent&quot;,</b>
<b class="fc">&nbsp;                disableType = if (fundSofs.any { it.disableType == DisableType.Show }) DisableType.Show else DisableType.DisableAndShow,</b>
<b class="pc">&nbsp;                info = presentationSof?.info ?: PayXSofInfo(),</b>
<b class="pc">&nbsp;                reward = presentationSof?.reward</b>
<b class="fc">&nbsp;            ), children = fundSofs</b>
&nbsp;        )
&nbsp;    }
&nbsp;
&nbsp;    fun syncSuggestedSof(currentList: List&lt;SOFItem&gt;, data: SuggestedSof): SuggestedSof {
<b class="fc">&nbsp;        val (sofList, ctaList) = data</b>
<b class="pc">&nbsp;        val availableSofs = sofList.filter { it.disableType != DisableType.Hidden }</b>
<b class="fc">&nbsp;        val suggestedSofMap = availableSofs.associateBy { it.uId }</b>
<b class="fc">&nbsp;        val resultSof = currentList.map { currentSof -&gt;</b>
<b class="pc">&nbsp;            suggestedSofMap[currentSof.uId]?.let { currentSof.merge(it) } ?: currentSof</b>
<b class="fc">&nbsp;        }.toMutableList()</b>
&nbsp;
<b class="fc">&nbsp;        val currentSofIds = currentList.mapTo(mutableSetOf()) { it.uId }</b>
<b class="fc">&nbsp;        val newSofItems =</b>
<b class="fc">&nbsp;            availableSofs.filterNot { currentSofIds.contains(it.uId) || it.isInstallment }</b>
<b class="fc">&nbsp;        resultSof.addAll(newSofItems)</b>
&nbsp;
<b class="fc">&nbsp;        val filteredCtaList = ctaList.filter { it.action.action == SofActionType.HaveNextStep }</b>
&nbsp;
<b class="fc">&nbsp;        return SuggestedSof(sofList = resultSof, ctaList = filteredCtaList)</b>
&nbsp;    }
&nbsp;}
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-07-08 11:34</div>
</div>
</body>
</html>
